# Smart Parking System
## –°—Å—ã–ª–∫–∏
–î–µ–º–æ–Ω–º—Ç—Ä–∞—Ü–∏—è: https://drive.google.com/file/d/1xbkNostY-GqS42vO7aqeADsjEylpyNrF/view?usp=drivesdk

–¢–µ–ª–µ–≥—Ä–∞–º–º –±–æ—Ç: @ESPBarrier_bot
  
## üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–∏—Å—Ç–µ–º—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–ª–∞–≥–±–∞—É–º–æ–º –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∞—Ä–∫–æ–≤–∫–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Telegram-–±–æ—Ç–∞, —É–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤–æ–≥–æ –¥–∞—Ç—á–∏–∫–∞, —Ñ–æ—Ç–æ—Ä–µ–∑–∏—Å—Ç–æ—Ä–æ–≤ –∏ CO‚ÇÇ-–¥–∞—Ç—á–∏–∫–∞. 
 
–ü—Ä–æ–µ–∫—Ç –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ –ø–∞—Ä–∫–æ–≤–∫—É
- –ö–æ–Ω—Ç—Ä–æ–ª—å —É—Ä–æ–≤–Ω—è –∑–∞–≥—Ä—è–∑–Ω—ë–Ω–Ω–æ—Å—Ç–∏ –≤–æ–∑–¥—É—Ö–∞
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–ª–∞–¥–µ–ª—å—Ü—É –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è—Ö
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏ –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã—Ö –º–µ—Å—Ç
 
## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–ª–∞–≥–±–∞—É–º–æ–º —á–µ—Ä–µ–∑ Telegram-–±–æ—Ç–∞
- üÜî –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ Telegram chat ID
- üöó –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ —à–ª–∞–≥–±–∞—É–º–∞ –ø—Ä–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏
- üå´ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Ä–æ–≤–Ω—è CO‚ÇÇ –Ω–∞ –ø–∞—Ä–∫–æ–≤–∫–µ
- üÖøÔ∏è –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–Ω—è—Ç—ã—Ö –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã—Ö –º–µ—Å—Ç
- üì© –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–ª–∞–¥–µ–ª—å—Ü—É –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø—Ä–µ–¥–µ–ª–æ–≤ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è
- üìä –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã—Ö –º–µ—Å—Ç



## üîÑ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã


### 1. üöß –î–æ—Å—Ç—É–ø –Ω–∞ –ø–∞—Ä–∫–æ–≤–∫—É

1. –ú–∞—à–∏–Ω–∞ –ø–æ–¥—ä–µ–∑–∂–∞–µ—Ç –∫ —à–ª–∞–≥–±–∞—É–º—É (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —É–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤—ã–º –¥–∞–ª—å–Ω–æ–º–µ—Ä–æ–º).
2. –í–æ–¥–∏—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É `/open` –±–æ—Ç—É `@ESPBarrier_bot`.
3. –ï—Å–ª–∏ –¥–∞–ª—å–Ω–æ–º–µ—Ä —Å–æ–æ–±—â–∞–µ—Ç, —á—Ç–æ –º–∞—à–∏–Ω–∞ —Å—Ç–æ–∏—Ç –≤–æ–∑–ª–µ —à–ª–∞–≥–±–∞—É–º–∞, —Ç–æ –±–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç chat ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
   - ‚úÖ –ï—Å–ª–∏ ID –µ—Å—Ç—å –≤ —Å–ø–∏—Å–∫–µ ‚Äî —à–ª–∞–≥–±–∞—É–º –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è.
   - ‚ùå –ï—Å–ª–∏ ID –Ω–µ—Ç ‚Äî –±–æ—Ç —Å–æ–æ–±—â–∞–µ—Ç, —á—Ç–æ –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω.



### 2. üå¨ –ö–æ–Ω—Ç—Ä–æ–ª—å CO‚ÇÇ

- –î–∞—Ç—á–∏–∫ CO‚ÇÇ —Å—á–∏—Ç—ã–≤–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å —É–≥–ª–µ–∫–∏—Å–ª–æ–≥–æ –≥–∞–∑–∞.
- –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞.



### 3. üì∂ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Å—Ç

- –° –ø–æ–º–æ—â—å—é —Ñ–æ—Ç–æ—Ä–µ–∑–∏—Å—Ç–æ—Ä–æ–≤ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –∑–∞–Ω—è—Ç—ã–µ –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã–µ –º–µ—Å—Ç–∞.
- –î–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø–∞—Ä–∫–æ–≤–∫–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—Ä–æ—Å –≤ Telegram-–±–æ—Ç–µ –ø–æ –∫–æ–º–∞–Ω–¥–µ `/status`. 



## üí¨ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞      | –û–ø–∏—Å–∞–Ω–∏–µ                                          |
|--------------|---------------------------------------------------|
| `/start`    | –ù–ê—á–∏–Ω–∞–µ—Ç –¥–∏–∞–ª–æ–≥ –∏ –¥–∞—ë—Ç –≤—ã–±—Ä–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã |
| `/open`      | –ó–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏–µ —à–ª–∞–≥–±–∞—É–º–∞                     |
| `/status`    | –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–∞—Ä–∫–æ–≤–∫–µ (CO‚ÇÇ + –º–µ—Å—Ç–∞) |
| `/myid`    | –£–∑–Ω–∞—Ç—å —Å–≤–æ–π ID –≤ —Å–∏—Å—Ç–µ–º–µ |



## üß∞ –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- ‚úÖ ESP32 
- ‚úÖ –£–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤–æ–π –¥–∞—Ç—á–∏–∫ HC-SR04
- ‚úÖ –ú–æ–¥—É–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ—Ä–µ–∑–∏—Å—Ç–æ—Ä—ã 
- ‚úÖ –î–∞—Ç—á–∏–∫ CO‚ÇÇ 
- ‚úÖ –°–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥ –¥–ª—è —à–ª–∞–≥–±–∞—É–º–∞
- ‚úÖ Wi-Fi —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ Telegram Bot API

## –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ 
### ‚úÖ bool isChatAllowed(String chat_id)

–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ—Å—Ç—É–ø –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –±–æ—Ç–æ–º.

–ü—Ä–∏–Ω–∏–º–∞–µ—Ç:

chat_id ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä Telegram-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:

- true ‚Äî –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø –µ—Å—Ç—å,
- false ‚Äî –µ—Å–ª–∏ –Ω–µ—Ç (–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç–∫–∞–∑–µ –≤ –¥–æ—Å—Ç—É–ø–µ).


### ‚úÖ float readDistanceCM()

–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:
–°—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç —É–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤–æ–≥–æ –¥–∞—Ç—á–∏–∫–∞.

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
- –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –≤ —Å–∞–Ω—Ç–∏–º–µ—Ç—Ä–∞—Ö –¥–æ –æ–±—ä–µ–∫—Ç–∞.
- 999, –µ—Å–ª–∏ –∏–∑–º–µ—Ä–µ–Ω–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å.

### ‚úÖ void handleUART()
–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–æ UART (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç Arduino).

–ò–∑–≤–ª–µ–∫–∞–µ—Ç:
–ó–Ω–∞—á–µ–Ω–∏—è CO2, CO, —Å—Ç–∞—Ç—É—Å CO2, –∏ —Å—Ç–∞—Ç—É—Å—ã –ø–∞—Ä–∫–æ–≤–∫–∏ (L1, L2).

–¢–∞–∫–∂–µ:
–û–±–Ω–æ–≤–ª—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ CO2.

### ‚úÖ String getParkingStatusMessage()
–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Å—Ç–∞—Ç—É—Å–µ –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã—Ö –º–µ—Å—Ç.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç:
lightStatus1, lightStatus2

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–º, –∫–∞–∫–∏–µ –º–µ—Å—Ç–∞ –∑–∞–Ω—è—Ç—ã.

### ‚úÖ void handleNewMessages(int numNewMessages)
–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –±–æ—Ç–æ–º.

–ü—Ä–∏–Ω–∏–º–∞–µ—Ç:
numNewMessages ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç Telegram.

–†–µ–∞–ª–∏–∑—É–µ—Ç –∫–æ–º–∞–Ω–¥—ã:

`/start`, `/open`, `/status`, `/myid`, `/airdata`

## Use-case
![Usecase](https://github.com/user-attachments/assets/34640fce-60e1-4cc9-ab64-b584db4de571)


## –°—Ö–µ–º–∞

![–°—Ö–µ–º–∞ –Ω–æ—Ä–º](https://github.com/user-attachments/assets/8616a6d2-1e7d-4867-bb2f-0a01b9a3a6d6)

## –°—Ö–µ–º–∞
https://drive.google.com/file/d/1xbkNostY-GqS42vO7aqeADsjEylpyNrF/view?usp=drivesdk
