# Smart Parking System
## –°—Å—ã–ª–∫–∏
–î–µ–º–æ–Ω–º—Ç—Ä–∞—Ü–∏—è: https://drive.google.com/file/d/1xbkNostY-GqS42vO7aqeADsjEylpyNrF/view?usp=drivesdk

–¢–µ–ª–µ–≥—Ä–∞–º–º –±–æ—Ç: @ESPBarrier_bot
  
## üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–∏—Å—Ç–µ–º—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–ª–∞–≥–±–∞—É–º–æ–º –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∞—Ä–∫–æ–≤–∫–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Telegram-–±–æ—Ç–∞, —É–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤–æ–≥–æ –¥–∞—Ç—á–∏–∫–∞, —Ñ–æ—Ç–æ—Ä–µ–∑–∏—Å—Ç–æ—Ä–æ–≤ –∏ CO‚ÇÇ-–¥–∞—Ç—á–∏–∫–∞. 
 
–ü—Ä–æ–µ–∫—Ç –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ –ø–∞—Ä–∫–æ–≤–∫—É
- –ö–æ–Ω—Ç—Ä–æ–ª—å —É—Ä–æ–≤–Ω—è –∑–∞–≥—Ä—è–∑–Ω—ë–Ω–Ω–æ—Å—Ç–∏ –≤–æ–∑–¥—É—Ö–∞ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏ –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã—Ö –º–µ—Å—Ç
 
## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–ª–∞–≥–±–∞—É–º–æ–º —á–µ—Ä–µ–∑ Telegram-–±–æ—Ç–∞
- üÜî –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ Telegram chat ID
- üöó –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ —à–ª–∞–≥–±–∞—É–º–∞ –ø—Ä–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏
- üå´ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Ä–æ–≤–Ω—è CO‚ÇÇ –Ω–∞ –ø–∞—Ä–∫–æ–≤–∫–µ
- üÖøÔ∏è –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–Ω—è—Ç—ã—Ö –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã—Ö –º–µ—Å—Ç
- üì© –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø—Ä–µ–¥–µ–ª–æ–≤ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è
- üìä –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã—Ö –º–µ—Å—Ç


# ü§ñ –¢–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç Barrier 

–ë–æ—Ç —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–∏—Å—Ç–µ–º–æ–π —É–º–Ω–æ–π –ø–∞—Ä–∫–æ–≤–∫–∏: –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –≤—ä–µ–∑–¥/–≤—ã–µ–∑–¥, —É–≤–µ–¥–æ–º–ª—è–µ—Ç –æ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏–∏ –≤–æ–∑–¥—É—Ö–∞ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.

---

## üìå –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–ª–∞–≥–±–∞—É–º–æ–º (–≤—ä–µ–∑–¥/–≤—ã–µ–∑–¥)
- üÜî –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–≤–æ–µ–≥–æ Chat ID
- üÖøÔ∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã—Ö –º–µ—Å—Ç
- üå´ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ CO‚ÇÇ
- üõ° –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- ‚ûï –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üí¨ –ö–æ–º–∞–Ω–¥—ã Telegram-–±–æ—Ç–∞

### üî∞ –î–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

| –ö–æ–º–∞–Ω–¥–∞ / –ö–Ω–æ–ø–∫–∞        | –û–ø–∏—Å–∞–Ω–∏–µ                                                                 |
|-------------------------|--------------------------------------------------------------------------|
| `/start`                | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏                        |
| `üìã –ú–æ–π Chat ID`        | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞—à Telegram chat ID                                          |
| `üîì –û—Ç–∫—Ä—ã—Ç—å –≤—ä–µ–∑–¥`      | –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∏–µ —à–ª–∞–≥–±–∞—É–º–∞                                           |
| `üö™ –û—Ç–∫—Ä—ã—Ç—å –≤—ã–µ–∑–¥`      | –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∏–µ —à–ª–∞–≥–±–∞—É–º–∞ –¥–ª—è –≤—ã–µ–∑–¥–∞                                |
| `‚Ñπ –°–≤–æ–±–æ–¥–Ω—ã–µ –º–µ—Å—Ç–∞`     | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç –Ω–∞ –ø–∞—Ä–∫–æ–≤–∫–µ                         |
| `üõ° –°—Ç–∞—Ç—å –∞–¥–º–∏–Ω–æ–º`       | –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –≤–≤–æ–¥ –ø–∞—Ä–æ–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞                                   |

---

### üõ° –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

–ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è `admin228`, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞:

| –ö–æ–º–∞–Ω–¥–∞ / –ö–Ω–æ–ø–∫–∞                  | –û–ø–∏—Å–∞–Ω–∏–µ                                                          |
|----------------------------------|-------------------------------------------------------------------|
| `‚ûï –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è` | –í–≤–æ–¥ chat ID –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –µ–≥–æ –≤ —Å–∏—Å—Ç–µ–º–µ      |
| `‚ùå –£–¥–∞–ª–∏—Ç—å –∞–¥–º–∏–Ω–∞`               | –í–≤–æ–¥ chat ID –¥—Ä—É–≥–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–∞–≤             |


## ‚ö†Ô∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ë–æ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å —É–≥–∞—Ä–Ω–æ–≥–æ –≥–∞–∑–∞ (CO‚ÇÇ) –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏.  
–ï—Å–ª–∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è CO‚ÇÇ –ø—Ä–µ–≤—ã—à–∞–µ—Ç **1000 ppm**, –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ **–≤—Å–µ–º –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º**:

`‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ: –æ–ø–∞—Å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å —É–≥–∞—Ä–Ω–æ–≥–æ –≥–∞–∑–∞!`

## üîß –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–ª–æ–≥–∏–∫–∞)

| –§—É–Ω–∫—Ü–∏—è                      | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                                       |
|-----------------------------|------------------------------------------------------------------|
| `_set_wanna_entrance_open`  | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏–µ –≤—ä–µ–∑–¥–∞ –≤ –ë–î                     |
| `_set_wanna_exit_open`      | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏–µ –≤—ã–µ–∑–¥–∞ –≤ –ë–î                     |
| `_change_user_status`       | –î–µ–ª–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º                              |
| `_add_new_user`             | –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                                 |
| `_remove_admin_rights`      | –£–¥–∞–ª—è–µ—Ç –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞                                     |
| `notify_high_co2()`         | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Ä–æ–≤–µ–Ω—å CO‚ÇÇ –∏ —Ä–∞—Å—Å—ã–ª–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è                    |
| `periodic_co2_check()`      | –ó–∞–ø—É—Å–∫–∞–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É (–∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥)              |

---

## üì¶ –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

- [**aiogram**](https://docs.aiogram.dev/) ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram Bot API.
- [**SQLAlchemy**](https://www.sqlalchemy.org/) ‚Äî ORM –¥–ª—è —É–¥–æ–±–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.
- [**asyncpg**](https://magicstack.github.io/asyncpg/) ‚Äî –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π PostgreSQL-–¥—Ä–∞–π–≤–µ—Ä –¥–ª—è asyncio.
- **hashlib** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–æ–¥—É–ª—å Python –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–æ–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞).
- **dotenv** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ `.env` —Ñ–∞–π–ª–∞.

  
## üîÑ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã


### 1. üöß –î–æ—Å—Ç—É–ø –Ω–∞ –ø–∞—Ä–∫–æ–≤–∫—É

1. –ú–∞—à–∏–Ω–∞ –ø–æ–¥—ä–µ–∑–∂–∞–µ—Ç –∫ —à–ª–∞–≥–±–∞—É–º—É, –∏ —Å –ø–æ–º–æ—â—å—é —É–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤–æ–≥–æ –¥–∞–ª—å–Ω–æ–º–µ—Ä–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –µ—ë –ø–æ–ª–æ–∂–µ–Ω–∏–µ (–Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –æ–Ω–∞ –±–ª–∏–∑–∫–æ –∫ —à–ª–∞–≥–±–∞—É–º—É).
2. –í–æ–¥–∏—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É /open –≤ Telegram-–±–æ—Ç @ESPBarrier_bot –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏–µ —à–ª–∞–≥–±–∞—É–º–∞.
3. –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
‚úÖ –ï—Å–ª–∏ chat ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, —à–ª–∞–≥–±–∞—É–º –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è.
‚ùå –ï—Å–ª–∏ chat ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω.



### 2. üå¨ –ö–æ–Ω—Ç—Ä–æ–ª—å CO‚ÇÇ

- –î–∞—Ç—á–∏–∫ CO‚ÇÇ —Å—á–∏—Ç—ã–≤–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å —É–≥–ª–µ–∫–∏—Å–ª–æ–≥–æ –≥–∞–∑–∞.
- –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞.



### 3. üì∂ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Å—Ç

- –° –ø–æ–º–æ—â—å—é —Ñ–æ—Ç–æ—Ä–µ–∑–∏—Å—Ç–æ—Ä–æ–≤ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –∑–∞–Ω—è—Ç—ã–µ –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã–µ –º–µ—Å—Ç–∞.
- –î–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø–∞—Ä–∫–æ–≤–∫–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—Ä–æ—Å –≤ Telegram-–±–æ—Ç–µ –ø–æ –∫–æ–º–∞–Ω–¥–µ `/status`. 



## üí¨ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞      | –û–ø–∏—Å–∞–Ω–∏–µ                                          |
|--------------|---------------------------------------------------|
| `/start`    | –ù–ê—á–∏–Ω–∞–µ—Ç –¥–∏–∞–ª–æ–≥ –∏ –¥–∞—ë—Ç –≤—ã–±—Ä–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã |
| `/open`      | –ó–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏–µ —à–ª–∞–≥–±–∞—É–º–∞                     |
| `/status`    | –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–∞—Ä–∫–æ–≤–∫–µ (CO‚ÇÇ + –º–µ—Å—Ç–∞) |
| `/myid`    | –£–∑–Ω–∞—Ç—å —Å–≤–æ–π ID –≤ —Å–∏—Å—Ç–µ–º–µ |

# üì° Sensor API

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç API-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å ESP-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –∏ —Å–∏—Å—Ç–µ–º–æ–π —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–æ—Ä–æ—Ç–∞–º–∏.

## üîÑ POST `/sensors/data`

–ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ—Ç ESP-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

### Request Body

```json
{
  "sensorId": "esp32-01",
  "temperature": 25.4,
  "humidity": 50.2,
  "isWannaEntranceOpen": true,
  "isWannaExitOpen": false
}
```

## üß∞ –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- ‚úÖ ESP32 
- ‚úÖ –£–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤–æ–π –¥–∞—Ç—á–∏–∫ HC-SR04
- ‚úÖ –ú–æ–¥—É–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ—Ä–µ–∑–∏—Å—Ç–æ—Ä—ã 
- ‚úÖ –î–∞—Ç—á–∏–∫ CO‚ÇÇ 
- ‚úÖ –°–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥ –¥–ª—è —à–ª–∞–≥–±–∞—É–º–∞
- ‚úÖ Wi-Fi —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ Telegram Bot API

# –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ—à–∏–≤–∫–∏ esp8266

### ‚úÖ `float readDistanceCM(int trigPin, int echoPin)`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
–ò–∑–º–µ—Ä—è–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –æ–±—ä–µ–∫—Ç–∞ —Å –ø–æ–º–æ—â—å—é —É–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤–æ–≥–æ –¥–∞—Ç—á–∏–∫–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**  
- `trigPin` ‚Äî –ø–∏–Ω —Ç—Ä–∏–≥–≥–µ—Ä–∞ (–≤—ã—Ö–æ–¥–Ω–æ–π —Å–∏–≥–Ω–∞–ª)
- `echoPin` ‚Äî –ø–∏–Ω —ç—Ö–æ (–≤—Ö–æ–¥–Ω–æ–π —Å–∏–≥–Ω–∞–ª)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**  
- –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –æ–±—ä–µ–∫—Ç–∞ –≤ —Å–∞–Ω—Ç–∏–º–µ—Ç—Ä–∞—Ö.
- `999.0`, –µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω (—Ç–∞–π–º–∞—É—Ç).

### ‚úÖ `void handleSerialInput()`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫—É, –ø–æ–ª—É—á–µ–Ω–Ω—É—é –ø–æ UART (–æ—Ç Arduino Nano), —Å–æ–¥–µ—Ä–∂–∞—â—É—é:
- –£—Ä–æ–≤–µ–Ω—å CO‚ÇÇ (–≤ ppm),
- –°—Ç–∞—Ç—É—Å –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã—Ö –º–µ—Å—Ç (P1:free/busy, P2:free/busy).

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
–û–±–Ω–æ–≤–ª—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `co2Value` –∏ `freePlaces`.

### ‚úÖ `void sendSensorData()`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
–§–æ—Ä–º–∏—Ä—É–µ—Ç JSON-–æ–±—ä–µ–∫—Ç —Å —Ç–µ–∫—É—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (CO‚ÇÇ, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç, —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è) –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø–æ HTTP POST-–∑–∞–ø—Ä–æ—Å—É.

**–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞:**  
- `http://<baseUrl>/sensors/data`

**–£—Å–ª–æ–≤–∏—è –≤—ã–∑–æ–≤–∞:**  
CO‚ÇÇ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º–∏ (`co2Value >= 0`, `freePlaces >= 0`).

### ‚úÖ `void checkOpenRequest()`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —É —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –æ—Ç–∫—Ä—ã—Ç—å —à–ª–∞–≥–±–∞—É–º.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**  
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç GET-–∑–∞–ø—Ä–æ—Å –Ω–∞ `dataEndpoint`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–ª–∞–≥–∏ `isWannaEntranceOpen` –∏ `isWannaExitOpen`
- –ï—Å–ª–∏ –æ–¥–∏–Ω –∏–∑ –Ω–∏—Ö `true`, –≤—ã–∑—ã–≤–∞–µ—Ç `openBarrier(...)`

### ‚úÖ `void openBarrier(GateAction action)`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
–û—Ç–∫—Ä—ã–≤–∞–µ—Ç —à–ª–∞–≥–±–∞—É–º –ø—É—Ç—ë–º –ø–æ–≤–æ—Ä–æ—Ç–∞ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞ –Ω–∞ 90¬∞ –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–ª–∞–≥ `isGateOpened = true`.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**  
- `action` ‚Äî –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è: `ENTRANCE` –∏–ª–∏ `EXIT`.

**–¢–∞–∫–∂–µ:**  
–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–∏–ø –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è (`lastGateAction`) –∏ –≤—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ `Serial`.

### ‚úÖ `void resetGateStatus()`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
–ó–∞–∫—Ä—ã–≤–∞–µ—Ç —à–ª–∞–≥–±–∞—É–º –∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –æ—Ç–∫—Ä—ã—Ç–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥ –≤ –ø–æ–∑–∏—Ü–∏—é 0¬∞.
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST-–∑–∞–ø—Ä–æ—Å –Ω–∞ `resetEndpoint` (`/sensors/reset-gate-status`) —Å —Ç–µ–ª–æ–º:
  ```json
  {
    "reset_entrance": true/false,
    "reset_exit": true/false
  }

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Arduino:

- üì∂ ESP8266WiFi  
  –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è ESP8266 –∫ Wi-Fi —Å–µ—Ç—è–º. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º.

- üì° ESP8266HTTPClient
  –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å HTTP-–∑–∞–ø—Ä–æ—Å—ã (GET, POST) —Å ESP8266. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥.
  
- üì¶ ArduinoJson  
  –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JSON ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ JSON-–¥–∞–Ω–Ω—ã—Ö, –≤ —Ç–æ–º —á–∏—Å–ª–µ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç Telegram.

- üß∞ Servo  
  –ü–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞–º–∏ —Å –ø–æ–º–æ—â—å—é –ø—Ä–æ—Å—Ç–æ–≥–æ API. –í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∏ –∑–∞–∫—Ä—ã—Ç–∏—è —à–ª–∞–≥–±–∞—É–º–∞.
  
## Use-case
<img width="753" alt="image" src="https://github.com/user-attachments/assets/094fe2f6-1163-4182-964a-15d2dfd2af93" />



## –°—Ö–µ–º–∞

![Frame 1](https://github.com/user-attachments/assets/b1a1ed48-ac54-469f-a831-ee5242e1a812)


## –°—Ö–µ–º–∞
https://drive.google.com/file/d/1xbkNostY-GqS42vO7aqeADsjEylpyNrF/view?usp=drivesdk
